<div class="profile-container">
  <!-- Loading Spinner -->
  <div *ngIf="loading" class="spinner-container">
    <div class="spinner"></div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <!-- Profile Section -->
  <ng-container *ngIf="!loading && !error && customer">
    <div class="d-flex justify-content-between">
      <div>
        <small class="mb-5">My Profile</small>
      </div>
      <div (click)="Back()" style="color: green;font-family: poppins;font-weight: 600;cursor: pointer;"><i
          class="bi bi-arrow-left-circle-fill me-1"></i>Back</div>
    </div>
    <div class="customer-details-container mt-3" style="background-color: #ffffff;">
      <div class="customer-header d-flex">
        <div class="profile-section">
          <div class="profile-image">
            <img src="/Background image/Profile-Picture.jpg" alt="{{ customer.firstName || 'John' }}">
          </div>
          <div class="">
            <div class="profile-info gap-3">
              <h4 class="text-black customer-name" style="font-weight: 700; font-family: poppins; position: relative;">
                {{ customer.firstName }} {{ customer.lastName }}
                <i class="bi bi-patch-check-fill name-icon" style="color: green; font-size: 20px;"></i>
              </h4>

              <div class="tags">
                <span class="tag">Business</span>
                <span class="tag" style="color: rgb(0, 187, 187); background-color: rgb(201, 244, 244);">Premium</span>
                <span class="tag" style="color: rgb(255, 0, 0); background-color: rgb(251, 219, 219)">Verified</span>
              </div>
              <div class="details gap-5">
                <span><i class="far fa-calendar pe-2"></i> {{ customer.joinDate | date }}</span>
                <span><i class="far fa-envelope pe-2"></i> {{ customer.email }}</span>
                <span><i class="bi bi-file-person pe-2"></i>{{ customer.nic }}</span>
              </div>
              <p class="description">{{ customer.phoneNumber || 'No phone number' }}</p>
            </div>
          </div>
        </div>
        <div style="position: relative;left: 20%;">
          <button type="button" class="btn btn-outline-secondary" routerLink="/Customer/EditProfile"><i
              class="fa-solid fa-pen-to-square "></i></button>
        </div>
      </div>

      <!-- Rental Stats Section -->
      <div class="stats-container " style="background-color:#fcfdff;">
        <div class="stat-card">
          <div>
            <i class="fa-solid fa-coins icon"></i>
          </div>
          <div>
            <div class="stat-value">${{ customer.payments?.length }}+</div>
            <div class="stat-label">Total Amount</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="mt-3 ">
            <i class="bi bi-film icon  ps-4 pe-4" style="background-color:#e2dbfd ;color:#9a84ec ;"></i>
          </div>
          <div>
            <div class="stat-value">{{ customer.rentals?.length || 0 }}</div>
            <div class="stat-label">Total Rentals</div>
          </div>

        </div>

        <div class="stat-card">
          <div>
            <i class="fa-solid fa-comment icon " style="background-color:#ffe2e1 ;color:#fe8080 ;"></i>

          </div>
          <div>
            <div class="stat-value">{{ customer.reviews?.length || 0 }}</div>
            <div class="stat-label">Review Count</div>
          </div>

        </div>

        <div class="stat-card">
          <div>
            <i class="fa-solid fa-bell icon" style="background-color:#fdebd2;color:#fdad60 ;"></i>
          </div>
          <div>
            <div class="stat-value">{{ customer.notifications?.length || 0 }}</div>
            <div class="stat-label">Notifications</div>
          </div>


        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <div class="justify-content-start" style="width: max-content; height: max-content;">
            <h4 style="font-family: poppins;font-weight: 700;">Rental Status</h4>
            <div class="p-0 m-0" style="width: 400px; height: 400px;">
              <canvas id="rentalStatusChart"></canvas>
            </div>
          </div>
        </div>
        <div class="col-6">
          <h4 style="font-family: poppins;font-weight: 700;">Reviews</h4>

        </div>
      </div>

    </div>
  </ng-container>
</div>